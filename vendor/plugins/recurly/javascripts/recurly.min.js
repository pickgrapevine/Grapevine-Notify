(function(f){function t(y){function x(){}x.prototype=y||this;return new x()}var h={};h.settings={enableGeoIP:true,acceptedCards:["american_express","discover","mastercard","visa"]};h.dom={};h.Error={toString:function(){return"RecurlyJS Error: "+this.message}};h.raiseError=function(x){var y=t(h.Error);y.message=x;throw y};h.config=function(x){f.extend(true,h.settings,x);if(!x.baseURL){h.settings.baseURL="https://api.recurly.com/jsonp/";var y=h.settings.subdomain||h.raiseError("company subdomain not configured");h.settings.baseURL+=y+"/"}};function s(y,x){if(y==1){return x.substr(0,x.length-1)}return""+y+" "+x}(h.Cost=function(x){this._cents=x||0}).prototype={toString:function(){return h.formatCurrency(this.dollars())},cents:function(x){if(x===undefined){return this._cents}return new Cost(x)},dollars:function(x){if(x===undefined){return this._cents/100}return new h.Cost(x*100)},mult:function(x){return new h.Cost(this._cents*x)},add:function(x){if(x.cents){x=x.cents()}return new h.Cost(this._cents+x)},sub:function(x){if(x.cents){x=x.cents()}return new h.Cost(this._cents-x)}};h.Cost.FREE=new h.Cost(0);(h.TimePeriod=function(y,x){this.length=y;this.unit=x}).prototype={toString:function(){return""+s(this.length,this.unit)},toDate:function(){var x=new Date();switch(this.unit){case"month":x.setMonth(x.getMonth()+this.length);break;case"day":x.setDay(x.getDay()+this.length);break}return x},clone:function(){return new h.TimePeriod(this.length,this.unit)}};(h.RecurringCost=function(y,x){this.cost=y;this.interval=x}).prototype={toString:function(){return""+this.cost+" every "+this.interval},clone:function(){return new h.TimePeriod(this.length,this.unit)}};h.RecurringCost.FREE=new h.RecurringCost(0,null);(h.RecurringCostStage=function(x,y){this.recurringCost=x;this.duration=y}).prototype={toString:function(){this.recurringCost.toString()+" for "+this.duration.toString()}};h.locale={};h.locale.errors={emptyField:"Required field",missingFullAddress:"Please enter your full address.",invalidEmail:"Invalid",invalidCC:"Invalid",invalidCVV:"Invalid",invalidCoupon:"Invalid",cardDeclined:"Transaction declined",acceptTOS:"Please accept the Terms of Service."};h.locale.currencies={};h.locale.currency={format:"%u%n",separator:".",delimiter:",",precision:2};function q(x,y){var A=h.locale.currencies[x]=t(h.locale.currency);for(var z in y){A[z]=y[z]}}q("USD",{symbol:"$"});q("AUD",{symbol:"$"});q("CAD",{symbol:"$"});q("EUR",{symbol:"\u20ac"});q("GBP",{symbol:"\u00a3"});q("CZK",{symbol:"\u004b"});q("DKK",{symbol:"\u006b\u0072"});q("HUF",{symbol:"Ft"});q("JPY",{symbol:"\u00a5"});q("NOK",{symbol:"kr"});q("NZD",{symbol:"$"});q("PLN",{symbol:"\u007a"});q("SGD",{symbol:"$"});q("SEK",{symbol:"kr"});q("CHF",{symbol:"Fr"});q("ZAR",{symbol:"R"});h.settings.locale=h.locale;h.knownCards={visa:{prefixes:[4],name:"Visa"},mastercard:{prefixes:[51,52,53,54,55],name:"MasterCard"},american_express:{prefixes:[34,37],name:"American Express"},discover:{prefixes:[6011,62,64,65],name:"Discover"},diners_club:{prefixes:[305,36,38],name:"Diners Club"},carte_blanche:{prefixes:[300,301,302,303,304,305]},jcb:{prefixes:[35],name:"JCB"},enroute:{prefixes:[2014,2149],name:"EnRoute"},solo:{prefixes:[6334,6767],name:"Solo"},"switch":{prefixes:[4903,4905,4911,4936,564182,633110,6333,6759],name:"Switch"},maestro:{prefixes:[5018,5020,5038,6304,6759,6761],name:"Maestro"},visa_electron:{prefixes:[417500,4917,4913,4508,4844],name:"Visa Electron"},laser:{prefixes:[6304,6706,6771,6709],name:"Laser"}};h.detectCardType=function(z){z=z.replace(/\D/g,"");var C=h.knownCards;for(var x in C){if(C.hasOwnProperty(x)){var D=C[x];for(var B=0,y=D.prefixes.length;B<y;++B){if(D.prefixes.hasOwnProperty(B)){var A=D.prefixes[B];if(new RegExp("^"+A.toString()).test(z)){return x}}}}}return false};h.formatCurrency=function(A,E){if(A<0){A=-A;var z=true}else{var z=false}E=E||h.settings.currency||h.raiseError("currency not configured");var D=h.locale.currency;var y=h.locale.currencies[E];var C=A.toFixed(y.precision);if(D.separator!="."){C=C.replace(/\./g,D.separator)}function x(G){var F=new RegExp("(-?[0-9]+)([0-9]{3})");while(F.test(G)){G=G.replace(F,"$1"+D.delimiter+"$2")}return G}C=x(C);var B=D.format;B=B.replace(/%u/g,y.symbol);B=B.replace(/%n/g,C);C=B;if(z){C="-"+C}return C};var m=["AT","BE","BG","CY","CZ","DK","EE","FI","FR","DE","GR","HU","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SK","SI","ES","SE","GB"];h.isCountryInEU=function(x){return f.inArray(x,m)!==-1};h.isVATNumberApplicable=function(y,x){if(!h.settings.VATPercent){return false}if(!h.settings.country){h.raiseError("you must configure a country for VAT to work")}if(!h.isCountryInEU(h.settings.country)){h.raiseError("you cannot charge VAT outside of the EU")}if(!h.isCountryInEU(y)){return false}return true};h.isVATChargeApplicable=function(y,z){if(!h.isVATNumberApplicable(y)){return false}var x=h.settings.country;return(x==y||!z)};h.flattenErrors=function(E,y){var x=[];var B=["base","account_id"];var y=y||"";if(typeof E=="string"||typeof E=="number"||typeof E=="boolean"){if(f.inArray(B,y)){return[E]}return[""+y+" "+E]}for(var A in E){if(E.hasOwnProperty(A)){y=(parseInt(A).toString()==A)?y:A;var D=h.flattenErrors(E[A],y);for(var C=0,z=D.length;C<z;++C){x.push(D[C])}}}return x};h.replaceVars=function(A,z){for(var y in z){if(z.hasOwnProperty(y)){var x=encodeURIComponent(z[y]);A=A.replace(new RegExp("\\{"+y+"\\}","g"),x)}}return A};h.post=function(y,C,x){var z=x.resultNamespace||"recurly_result";var D={};D[z]=C;C=D;var A=f("<form />").hide();A.attr("action",y).attr("method","POST").attr("enctype","application/x-www-form-urlencoded");function B(F,I,H){var E=(H.length>0?(H+"["+F+"]"):F);if(typeof I==="object"){for(var G in I){if(I.hasOwnProperty(G)){B(G,I[G],E)}}}else{f('<input type="hidden" />').attr({name:E,value:I}).appendTo(A)}}B("",C,"");f("body").append(A);A.submit()};function k(A){var z=f("<select>");for(var y in A){if(A.hasOwnProperty(y)){var x=A[y];z.append("<option value="+y+">"+x+"</option>")}}return z}(h.isValidCC=function(D){var y=D.val();y=y.replace(/\D/g,"");var B=0,A=0,x=false;for(var C=y.length-1;C>=0;C--){var z=y.charAt(C);var A=parseInt(z,10);if(x){if((A*=2)>9){A-=9}}B+=A;x=!x}return(B%10)==0}).defaultErrorKey="invalidCC";(h.isValidEmail=function(y){var x=y.val();return/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i.test(x)}).defaultErrorKey="invalidEmail";function b(x){return/^[0-9]+$/.test(x)}(h.isValidCVV=function(y){var x=y.val();return(x.length==3||x.length==4)&&b(x)}).defaultErrorKey="invalidCVV";(h.isNotEmpty=function(y){var x=y.val();if(y.is("select")){if(x=="-"||x=="--"){return false}}return !!x}).defaultErrorKey="emptyField";(h.isChecked=function(x){return x.is(":checked")}).defaultErrorKey="acceptTOS";h.Plan={create:t,fromJSON:function(A){var B=this.create();B.name=A.name;B.code=A.plan_code;B.cost=new h.Cost(A.unit_amount_in_cents);B.displayQuantity=A.display_quantity;B.interval=new h.TimePeriod(A.plan_interval_length,A.plan_interval_unit);if(A.trial_interval_length){B.trial=new h.TimePeriod(A.trial_interval_length,A.trial_interval_unit)}if(A.setup_fee_in_cents){B.setupFee=new h.Cost(A.setup_fee_in_cents)}B.addOns=[];if(A.add_ons){for(var y=A.add_ons.length,z=0;z<y;++z){var x=A.add_ons[z];B.addOns.push(h.AddOn.fromJSON(x))}}return B},get:function(x,y){f.ajax({url:h.settings.baseURL+"plans/"+x,dataType:"jsonp",jsonp:"callback",timeout:10000,success:function(z){var A=h.Plan.fromJSON(z);y(A)}})},createSubscription:function(){var x=t(h.Subscription);x.plan=t(this);x.plan.quantity=1;x.addOns=[];return x}};h.AddOn={fromJSON:function(y){var x=t(h.AddOn);x.name=y.name;x.code=y.add_on_code;x.cost=new h.Cost(y.default_unit_amount_in_cents);x.displayQuantity=y.display_quantity;return x},toJSON:function(){return{name:this.name,add_on_code:this.code,default_unit_amount_in_cents:this.default_unit_amount_in_cents}}};h.Account={create:t,toJSON:function(){return{first_name:this.firstName,last_name:this.lastName,company_name:this.companyName,account_code:this.code,email:this.email}}};h.BillingInfo={create:t,toJSON:function(){return{first_name:this.firstName,last_name:this.lastName,month:this.month,year:this.year,number:this.number,verification_value:this.cvv,address1:this.address1,address2:this.address2,city:this.city,state:this.state,zip:this.zip,country:this.country,phone:this.phone,vat_number:this.vatNumber}},save:function(x){var y={billing_info:this.toJSON(),signature:x.signature};if(!x.distinguishContactFromBillingInfo){y.account={account_code:x.accountCode,first_name:this.firstName,last_name:this.lastName}}f.ajax({url:h.settings.baseURL+"accounts/"+x.accountCode+"/billing_info/update",data:y,dataType:"jsonp",jsonp:"callback",timeout:60000,success:function(z){if(z.success&&x.success){x.success(z.success)}else{if(z.errors&&x.error){x.error(h.flattenErrors(z.errors))}}},error:function(){if(x.error){x.error(["Unknown error processing transaction. Please try again later."])}},complete:x.complete||f.noop})}};h.Subscription={create:t,plan:h.Plan,addOns:[],calculateTotals:function(){var A={stages:{}};A.plan=this.plan.cost.mult(this.plan.quantity);A.allAddOns=new h.Cost(0);A.addOns={};for(var y=this.addOns.length,z=0;z<y;++z){var x=this.addOns[z],D=x.cost.mult(x.quantity);A.addOns[x.code]=D;A.allAddOns=A.allAddOns.add(D)}A.stages.recurring=A.plan.add(A.allAddOns);A.stages.now=A.plan.add(A.allAddOns);if(this.plan.trial){A.stages.now=h.Cost.FREE}if(this.coupon){var B=A.stages.now;var C=A.stages.now.discount(this.coupon);A.coupon=C.sub(B);A.stages.now=C}if(this.plan.setupFee){A.stages.now=A.stages.now.add(this.plan.setupFee)}if(this.billingInfo&&h.isVATChargeApplicable(this.billingInfo.country,this.billingInfo.vatNumber)){A.vat=A.stages.now.mult((h.settings.VATPercent/100));A.stages.now=A.stages.now.add(A.vat)}return A},redeemAddOn:function(y){var x=y.createRedemption();this.addOns.push(x);return x},removeAddOn:function(A){for(var y=this.addOns,x=y.length,z=0;z<x;++z){if(y[z].code==A){return y.splice(z,1)}}},findAddOnByCode:function(z){for(var x=this.addOns.length,y=0;y<x;++y){if(this.addOns[y].code==z){return this.addOns[y]}}return false},toJSON:function(){var B={plan_code:this.plan.code,quantity:this.plan.quantity,coupon_code:this.coupon?this.coupon.code:undefined,add_ons:[]};for(var A=0,z=this.addOns.length,y=B.add_ons,x=this.addOns;A<z;++A){y.push({add_on_code:x[A].code,quantity:x[A].quantity})}return B},save:function(x){var y={subscription:this.toJSON(),account:this.account.toJSON(),billing_info:this.billingInfo.toJSON()};f.ajax({url:h.settings.baseURL+"subscribe",data:y,dataType:"jsonp",jsonp:"callback",timeout:60000,success:function(z){if(z.success&&x.success){x.success(z.success)}else{if(z.errors&&x.error){var A=z.errors.error_code;delete z.errors.error_code;x.error(h.flattenErrors(z.errors),A)}}},error:function(){if(x.error){x.error(["Unknown error processing transaction. Please try again later."])}},complete:x.complete})}};h.AddOn.createRedemption=function(y){var x=t(this);x.quantity=y||1;return x};h.Coupon={fromJSON:function(x){var y=t(h.Coupon);if(x.discount_in_cents){y.discountCost=new h.Cost(-x.discount_in_cents)}else{if(x.discount_percent){y.discountRatio=x.discount_percent/100}}y.description=x.description;return y},toJSON:function(){}};h.Cost.prototype.discount=function(x){if(x.discountCost){return this.add(x.discountCost)}var y=this.sub(this.mult(x.discountRatio));if(y.cents()<0){return h.Cost.FREE}return y};h.Subscription.getCoupon=function(z,x,y){if(!h.settings.baseURL){h.raiseError("Company subdomain not configured")}return f.ajax({url:h.settings.baseURL+"plans/"+this.plan.code+"/coupons/"+z,dataType:"jsonp",jsonp:"callback",timeout:10000,success:function(B){if(B.valid){var A=h.Coupon.fromJSON(B);A.code=z;x(A)}else{y()}},error:function(){y()}})};h.Transaction={toJSON:function(){return{currency:this.currency,amount_in_cents:this.cost.cents()}},create:t,save:function(x){var y={transaction:this.toJSON(),account:this.account?this.account.toJSON():undefined,billing_info:this.billingInfo.toJSON(),signature:x.signature};f.ajax({url:h.settings.baseURL+"transactions/create",data:y,dataType:"jsonp",jsonp:"callback",timeout:60000,success:function(z){if(z.success&&x.success){x.success(z.success)}else{if(z.errors&&x.error){x.error(h.flattenErrors(z.errors))}}},error:function(){if(x.error){x.error(["Unknown error processing transaction. Please try again later."])}},complete:x.complete||f.noop})}};h.UserError={};function r(x,y){var z=t(h.UserError);z.validation=x;z.element=y;throw z}function v(B){try{B()}catch(A){if(!A.validation){throw A}var C=A.element;var z=h.locale.errors[A.validation.errorKey];var y=A.validation.validator;var x=f('<div class="error">');x.text(z);x.appendTo(C.parent());C.addClass("invalid");C.bind("change keyup",function(){if(y(C)){C.removeClass("invalid");x.remove();C.unbind()}});C.focus()}}function p(z,B,y){var D=z.find(B+" input");if(D.length==0){D=z.find(B+" select")}if(D.length==0){return undefined}var C=D.val();for(var A=2,x;x=arguments[A];++A){if(!x.validator(D)){r(x,D)}}return C}function c(y,x){return{validator:y,errorKey:x||y.defaultErrorKey}}function a(x){var y=x.find(".server_errors");y.removeClass("any").addClass("none");y.empty()}function n(y,C){var A=y.find(".server_errors");a(y);var x=C.length;if(x){A.removeClass("none").addClass("any");for(var B=0;B<x;++B){var z=f('<div class="error">');z.text(C[B]);A.append(z)}}}var j={contactInfo:{firstName:".contact_info > .full_name > .first_name > input",lastName:".contact_info > .full_name > .last_name > input",email:".contact_info > .email > input",phone:".contact_info > .phone > input",companyName:".contact_info > .company_name > input"},billingInfo:{firstName:".billing_info > .credit_card > .first_name > input",lastName:".billing_info > .credit_card > .last_name > input",address1:".billing_info > .address > .address1 > input",address2:".billing_info > .address > .address2 > input",country:".billing_info > .address > .country > select",city:".billing_info > .address > .city > input",state:".billing_info > .address > .state_zip > .state > input",zip:".billing_info > .address > .state_zip > .zip > input",vatNumber:".billing_info > .vat_number > input"}};function o(A,x,C){if(!x){return}for(var z in x){if(x.hasOwnProperty(z)&&C.hasOwnProperty(z)){var y=x[z];var B=C[z];if(typeof B=="string"){A.find(B).val(y).change()}else{if(typeof B=="object"){o(A,y,B)}}}}}function l(x,y){if(!y.collectPhone){x.find(".phone").remove()}if(!y.collectCompany){x.find(".company_name").remove()}x.delegate(".placeholder","click",function(){var z=f(this);var A=f(this).parent();A.find("input").focus()});x.delegate("input","change keyup",function(){var A=f(this);var z=f(this).parent();if(A.val().length>0){z.find(".placeholder").hide()}else{z.find(".placeholder").show()}});x.delegate("input","focus",function(){f(this).parent().addClass("focus")});x.delegate("input","blur",function(){f(this).parent().removeClass("focus")});x.delegate("input","keydown",function(z){if(z.keyCode>=48&&z.keyCode<=90){f(this).parent().find(".placeholder").hide()}});o(x,y.preFill,j)}function g(z,A){if(A.distinguishContactFromBillingInfo){var y=z.find(".contact_info .first_name input");var B=z.find(".contact_info .last_name input");var C=y.val();var x=B.val();z.find(".contact_info .first_name input").change(function(){var D=z.find(".billing_info .first_name input");if(D.val()==C){D.val(f(this).val()).change()}C=y.val()});z.find(".contact_info .last_name input").change(function(){var D=z.find(".billing_info .last_name input");if(D.val()==x){D.val(f(this).val()).change()}x=B.val()})}else{z.find(".billing_info .first_name, .billing_info .last_name").remove()}}function e(F,B){var y=F.find(".country select");var S=F.find(".state");var W=S.find("input");var N=S.children();var J={};var H=h.states;var G=y.val();function L(ac,aa){var ab=H[ac];aa=aa.toUpperCase().trim();if(ab.hasOwnProperty(aa)){return aa}for(var Z in ab){if(ab.hasOwnProperty(Z)){var Y=ab[Z];if(aa==Y.toUpperCase()){return Z}}}return false}function X(ab,Y){var aa=S.hasClass("select_mode");if(ab=="US"||ab=="CA"){if(!aa||G!=ab){var Z=S.find("input").val();if(Z!=undefined&&Z!=""){Y=L(ab,Z);if(!Y){return false}}S.addClass("select_mode");S.children().detach();J[ab]=J[ab]||k(H[ab]);S.append(J[ab]);if(Y){S.find("select").val(Y)}}}else{if(aa){S.empty().append(N).removeClass("select_mode")}}}W.bind("change keyup",function(){X(G)});y.change(function(){var Y=f(this).val();X(Y);G=Y});function D(aa,Y){var Z=aa.val();if(!Y||Y==""){return false}if(Z&&Z!=""&&Z!="-"){return false}return aa.val(Y)}if(B.enableGeoIP){f.ajax({url:h.settings.baseURL+"location",dataType:"jsonp",jsonp:"callback",success:function(Y){if(Y.country){D(y,Y.country);X(Y.country,Y.state)}}})}else{if(h.settings.country){var P=F.find(".country option[value="+h.settings.country+"]");if(P.length){P.attr("selected",true).change()}}}var A=new Date();var I=A.getFullYear();var T=A.getMonth();var R=F.find(".year select");var x=F.find(".month select");for(var O=I;O<=I+10;++O){var C=f('<option name="'+O+'">'+O+"</option>");C.appendTo(R)}R.val(I+1);function Q(){if(R.val()==I){var Y=false;if(x.val()>T){Y=true}x.find("option").each(function(){if(f(this).val()<=T){f(this).attr("disabled",true)}else{f(this).removeAttr("disabled");if(!Y){f(this).attr("selected",true);Y=true}}})}else{x.find("option").removeAttr("disabled")}}Q();R.change(Q);if(B.addressRequirement=="none"){F.find(".address").remove()}else{if(B.addressRequirement=="zip"){F.find(".address").addClass("only_zip");F.find(".address1, .address2, .city, .state").remove();if(!h.settings.VATPercent){F.find(".country").remove()}}else{if(B.addressRequirement=="zipstreet"){F.find(".address").addClass("only_zipstreet");F.find(".city, .state").remove();if(!h.settings.VATPercent){F.find(".country").remove()}}else{if(B.addressRequirement=="full"){F.find(".address").addClass("full")}}}}var K=F.find(".accepted_cards");if(B.acceptedCards){var U=B.acceptedCards,M=U.length;for(var O=0;O<M;++O){var V=U[O];var E=f('<div class="card '+V+'">');var z=h.knownCards[V];if(z&&z.name){E.text(z.name)}K.append(E)}}F.find(".card_number input").bind("change keyup",function(){var Y=h.detectCardType(f(this).val());if(Y){K.find(".card").each(function(){f(this).toggleClass("match",f(this).hasClass(Y));f(this).toggleClass("no_match",!f(this).hasClass(Y))})}else{K.find(".card").removeClass("match no_match")}})}function i(x,z,y){z.firstName=p(x,".contact_info .first_name",c(h.isNotEmpty));z.lastName=p(x,".contact_info .last_name",c(h.isNotEmpty));z.companyName=p(x,".contact_info .company_name");z.email=p(x,".email",c(h.isNotEmpty),c(h.isValidEmail));z.code=y.accountCode}function d(x,z,y){z.firstName=p(x,".billing_info .first_name",c(h.isNotEmpty));z.lastName=p(x,".billing_info .last_name",c(h.isNotEmpty));z.number=p(x,".card_number",c(h.isNotEmpty),c(h.isValidCC));z.cvv=p(x,".cvv",c(h.isNotEmpty),c(h.isValidCVV));z.month=p(x,".month");z.year=p(x,".year");z.phone=p(x,".phone");z.address1=p(x,".address1",c(h.isNotEmpty));z.address2=p(x,".address2");z.city=p(x,".city",c(h.isNotEmpty));z.state=p(x,".state",c(h.isNotEmpty));z.zip=p(x,".zip",c(h.isNotEmpty));z.country=p(x,".country",c(h.isNotEmpty))}function u(x){p(x,".accept_tos",c(h.isChecked))}h.buildBillingInfoUpdateForm=function(y){var z={addressRequirement:"full",distinguishContactFromBillingInfo:true};y=f.extend(t(h.settings),z,y);if(!y.accountCode){h.raiseError("accountCode missing")}if(!y.signature){h.raiseError("signature missing")}var A=h.BillingInfo.create();var x=f(h.dom.update_billing_info_form);x.find(".billing_info").html(h.dom.billing_info_fields);l(x,y);e(x,y);x.submit(function(B){B.preventDefault();a(x);x.find(".error").remove();x.find(".invalid").removeClass("invalid");v(function(){d(x,A,y);x.addClass("submitting");x.find("button.submit").attr("disabled",true).text("Please Wait");A.save({signature:y.signature,distinguishContactFromBillingInfo:y.distinguishContactFromBillingInfo,accountCode:y.accountCode,success:function(C){if(y.afterUpdate){y.afterUpdate(C)}if(y.successURL){var D=y.successURL;h.post(D,C,y)}},error:function(C){if(!y.onError||!y.onError(C)){n(x,C)}},complete:function(){x.removeClass("submitting");x.find("button.submit").removeAttr("disabled").text("Update")}})})});if(y.beforeInject){y.beforeInject(x.get(0))}f(function(){var B=f(y.target);B.html(x);if(y.afterInject){y.afterInject(x.get(0))}})};function w(x,y){if(y.termsOfServiceURL||y.privacyPolicyURL){var z=x.find(".accept_tos").html(h.dom.terms_of_service);if(!(y.termsOfServiceURL&&y.privacyPolicyURL)){z.find("span.and").remove()}if(y.termsOfServiceURL){z.find("a.tos_link").attr("href",y.termsOfServiceURL)}else{z.find("a.tos_link").remove()}if(y.privacyPolicyURL){z.find("a.pp_link").attr("href",y.privacyPolicyURL)}else{z.find("a.pp_link").remove()}}else{x.find(".accept_tos").remove()}}h.buildTransactionForm=function(y){var A={addressRequirement:"full",distinguishContactFromBillingInfo:true,collectContactInfo:true};y=f.extend(t(h.settings),A,y);if(!y.collectContactInfo&&!y.accountCode){h.raiseError("collectContactInfo is false, but no accountCode provided")}if(!y.signature){h.raiseError("signature missing")}var C=h.BillingInfo.create(),z=h.Account.create(),B=h.Transaction.create();B.account=z;B.billingInfo=C;B.currency=y.currency;B.cost=new h.Cost(y.amountInCents);var x=f(h.dom.one_time_transaction_form);x.find(".billing_info").html(h.dom.billing_info_fields);if(y.collectContactInfo){x.find(".contact_info").html(h.dom.contact_info_fields)}else{x.find(".contact_info").remove()}l(x,y);g(x,y);e(x,y);w(x,y);x.submit(function(D){D.preventDefault();a(x);x.find(".error").remove();x.find(".invalid").removeClass("invalid");v(function(){i(x,z,y);d(x,C,y);u(x);x.addClass("submitting");x.find("button.submit").attr("disabled",true).text("Please Wait");B.save({signature:y.signature,accountCode:y.accountCode,success:function(E){if(y.afterPay){y.afterPay(E)}if(y.successURL){var F=y.successURL;h.post(F,E,y)}},error:function(E){if(!y.onError||!y.onError(E)){n(x,E)}},complete:function(){x.removeClass("submitting");x.find("button.submit").removeAttr("disabled").text("Pay")}})})});if(y.beforeInject){y.beforeInject(x.get(0))}f(function(){var D=f(y.target);D.html(x);if(y.afterInject){y.afterInject(x.get(0))}})};h.buildSubscriptionForm=function(y){var A={enableAddOns:true,enableCoupons:true,addressRequirement:"full",distinguishContactFromBillingInfo:false};y=f.extend(t(h.settings),A,y);var x=f(h.dom.subscribe_form);x.find(".contact_info").html(h.dom.contact_info_fields);x.find(".billing_info").html(h.dom.billing_info_fields);l(x,y);g(x,y);e(x,y);w(x,y);if(y.planCode){h.Plan.get(y.planCode,z)}else{if(y.plan){z(y.plan)}}function z(B){if(y.filterPlan){B=y.filterPlan(B)||B}var Q=B.createSubscription(),C=h.Account.create(),J=h.BillingInfo.create();Q.account=C;Q.billingInfo=J;if(y.filterSubscription){Q=y.filterSubscription(Q)||Q}if(!B.displayQuantity){x.find(".plan .quantity").remove()}if(B.setupFee){x.find(".subscription").addClass("with_setup_fee");x.find(".plan .setup_fee .cost").text(""+B.setupFee)}else{x.find(".plan .setup_fee").remove()}if(B.trial){x.find(".subscription").addClass("with_trial");x.find(".plan .free_trial").text("First "+B.trial+" free")}else{x.find(".plan .free_trial").remove()}function H(){var T=Q.calculateTotals();x.find(".plan .recurring_cost .cost").text(""+T.plan);x.find(".due_now .cost").text(""+T.stages.now);x.find(".coupon .discount").text(""+(T.coupon||""));x.find(".vat .cost").text(""+(T.vat||""));x.find(".add_ons .add_on").each(function(){var U=f(this).data("add_on");if(f(this).hasClass("selected")){var V=T.addOns[U.code];f(this).find(".cost").text("+ "+V)}else{f(this).find(".cost").text("+ "+U.cost)}})}x.find(".plan .quantity input").bind("change keyup",function(){Q.plan.quantity=parseInt(f(this).val(),10)||1;H()});x.find(".plan .name").text(B.name);x.find(".plan .recurring_cost .cost").text(""+B.cost);x.find(".plan .recurring_cost .interval").text("every "+B.interval);var F=x.find(".add_ons");if(y.enableAddOns){var N=B.addOns.length;if(N){F.removeClass("none").addClass("any");for(var O=0;O<N;++O){var K=B.addOns[O];var P="add_on add_on_"+K.code+(O%2?" even":" odd");if(O==0){P+=" first"}if(O==N-1){P+=" last"}var E=f('<div class="'+P+'"><div class="name">'+K.name+'</div><div class="field quantity"><div class="placeholder">Qty</div><input type="text"></div><div class="cost"/></div>');if(!K.displayQuantity){E.find(".quantity").remove()}E.data("add_on",K);E.appendTo(F)}F.delegate(".add_ons .quantity input","change keyup",function(W){var T=f(this).closest(".add_on");var V=T.data("add_on");var U=parseInt(f(this).val(),10)||1;Q.findAddOnByCode(V.code).quantity=U;H()});F.bind("selectstart",function(T){if(f(T.target).is(".add_on")){T.preventDefault()}});F.delegate(".add_ons .add_on","click",function(X){if(f(X.target).closest(".quantity").length){return}var V=!f(this).hasClass("selected");f(this).toggleClass("selected",V);var W=f(this).data("add_on");if(V){var T=Q.redeemAddOn(W);var U=f(this).find(".quantity input");T.quantity=parseInt(U.val(),10)||1;U.focus()}else{Q.removeAddOn(W.code)}H()})}}else{F.remove()}var I=x.find(".coupon");var M=null;function R(){var T=I.find("input").val();if(T==M){return}M=T;if(!T){I.removeClass("invalid").removeClass("valid");I.find(".description").text("");Q.coupon=undefined;H();return}I.addClass("checking");Q.getCoupon(T,function(U){I.removeClass("checking");Q.coupon=U;I.removeClass("invalid").addClass("valid");I.find(".description").text(U.description);H()},function(){Q.coupon=undefined;I.removeClass("checking");I.removeClass("valid").addClass("invalid");I.find(".description").text("Not Found");H()})}if(y.enableCoupons){I.find("input").bind("keyup change",function(T){});I.find("input").keypress(function(T){if(T.charCode==13){T.preventDefault();R()}});I.find(".check").click(function(){R()});I.find("input").blur(function(){I.find(".check").click()})}else{I.remove()}var D=x.find(".vat");var S=x.find(".vat_number");var L=S.find("input");D.find(".title").text("VAT at "+h.settings.VATPercent+"%");function G(){var U=x.find(".country select").val();var W=h.isVATNumberApplicable(U);S.toggleClass("applicable",W);S.toggleClass("inapplicable",!W);var V=L.val();var T=h.isVATChargeApplicable(U,V);D.toggleClass("applicable",T);D.toggleClass("inapplicable",!T)}x.find(".country select").change(function(){J.country=f(this).val();H();G()}).change();L.bind("keyup change",function(){J.vatNumber=f(this).val();H();G()});x.submit(function(T){T.preventDefault();a(x);x.find(".error").remove();x.find(".invalid").removeClass("invalid");v(function(){i(x,C,y);d(x,J,y);u(x);x.addClass("submitting");x.find("button.submit").attr("disabled",true).text("Please Wait");Q.save({success:function(U){if(y.afterSubscribe){y.afterSubscribe(U)}if(y.successURL){var V=y.successURL;h.post(V,U,y)}},error:function(U){if(!y.onError||!y.onError(U)){n(x,U)}},complete:function(){x.removeClass("submitting");x.find("button.submit").removeAttr("disabled").text("Subscribe")}})})});H();if(y.beforeInject){y.beforeInject(x.get(0))}f(function(){var T=f(y.target);T.html(x);if(y.afterInject){y.afterInject(x.get(0))}})}};h.states={};h.states.US={"-":"Select State","--":"------------",AK:"Alaska",AL:"Alabama",AP:"Armed Forces Pacific",AR:"Arkansas",AS:"American Samoa",AZ:"Arizona",CA:"California",CO:"Colorado",CT:"Connecticut",DC:"District of Columbia",DE:"Delaware",FL:"Florida",FM:"Federated States of Micronesia",GA:"Georgia",GU:"Guam",HI:"Hawaii",IA:"Iowa",ID:"Idaho",IL:"Illinois",IN:"Indiana",KS:"Kansas",KY:"Kentucky",LA:"Louisiana",MA:"Massachusetts",MD:"Maryland",ME:"Maine",MH:"Marshall Islands",MI:"Michigan",MN:"Minnesota",MO:"Missouri",MP:"Northern Mariana Islands",MS:"Mississippi",MT:"Montana",NC:"North Carolina",ND:"North Dakota",NE:"Nebraska",NH:"New Hampshire",NJ:"New Jersey",NM:"New Mexico",NV:"Nevada",NY:"New York",OH:"Ohio",OK:"Oklahoma",OR:"Oregon",PA:"Pennsylvania",PR:"Puerto Rico",PW:"Palau",RI:"Rhode Island",SC:"South Carolina",SD:"South Dakota",TN:"Tennessee",TX:"Texas",UT:"Utah",VA:"Virginia",VI:"Virgin Islands",VT:"Vermont",WA:"Washington",WV:"West Virginia",WI:"Wisconsin",WY:"Wyoming"};h.states.CA={"-":"Select State","--":"------------",AB:"Alberta",BC:"British Columbia",MB:"Manitoba",NB:"New Brunswick",NL:"Newfoundland",NS:"Nova Scotia",NU:"Nunavut",ON:"Ontario",PE:"Prince Edward Island",QC:"Quebec",SK:"Saskatchewan",NT:"Northwest Territories",YT:"Yukon Territory",AA:"Armed Forces Americas",AE:"Armed Forces Europe, Middle East, &amp; Canada"};h.dom.contact_info_fields='<div class="title">Contact Info</div><div class="full_name"><div class="field first_name"><div class="placeholder">First Name </div><input type="text"/></div><div class="field last_name"><div class="placeholder">Last Name </div><input type="text"/></div></div><div class="field email"><div class="placeholder">Email </div><input type="text"/></div><div class="field phone"><div class="placeholder">Phone Number</div><input type="text"/></div><div class="field company_name"><div class="placeholder">Company/Organization Name</div><input type="text"/></div>';h.dom.billing_info_fields='<div class="title">Billing Info</div><div class="accepted_cards"></div><div class="credit_card"><div class="field first_name"><div class="placeholder">First Name </div><input type="text"/></div><div class="field last_name"><div class="placeholder">Last Name </div><input type="text"/></div><div class="card_cvv"><div class="field card_number"><div class="placeholder">Credit Card Number  </div><input type="text"/></div><div class="field cvv"><div class="placeholder">CVV </div><input type="text"/></div></div><div class="field expires"><div class="title">Expires </div><div class="month"><select><option value="1">01 - January</option><option value="2">02 - February</option><option value="3">03 - March</option><option value="4">04 - April</option><option value="5">05 - May</option><option value="6">06 - June</option><option value="7">07 - July</option><option value="8">08 - August</option><option value="9">09 - September</option><option value="10">10 - October</option><option value="11">11 - November</option><option value="12">12 - December</option></select></div><div class="year"><select></select></div></div></div><div class="address"><div class="field address1"><div class="placeholder">Address</div><input type="text"/></div><div class="field address2"><div class="placeholder">Apt/Suite</div><input type="text"/></div><div class="field city"><div class="placeholder">City</div><input type="text"/></div><div class="state_zip"><div class="field state"><div class="placeholder">State/Province</div><input type="text"/></div><div class="field zip"><div class="placeholder">Zip/Postal</div><input type="text"/></div></div><div class="field country"><select><option value="-">Select Country</option><option value="-">-------------- </option><option value="AF">Afghanistan</option><option value="AL">Albania</option><option value="DZ">Algeria</option><option value="AS">American Samoa</option><option value="AD">Andorra</option><option value="AO">Angola</option><option value="AI">Anguilla</option><option value="AQ">Antarctica</option><option value="AG">Antigua and Barbuda</option><option value="AR">Argentina</option><option value="AM">Armenia</option><option value="AW">Aruba</option><option value="AC">Ascension(Island</option><option value="AU">Australia</option><option value="AT">Austria</option><option value="AZ">Azerbaijan</option><option value="BS">Bahamas</option><option value="BH">Bahrain</option><option value="BD">Bangladesh</option><option value="BB">Barbados</option><option value="BY">Belarus</option><option value="BE">Belgium</option><option value="BZ">Belize</option><option value="BJ">Benin</option><option value="BM">Bermuda</option><option value="BT">Bhutan</option><option value="BO">Bolivia</option><option value="BA">Bosnia and Herzegovina</option><option value="BW">Botswana</option><option value="BV">Bouvet Island</option><option value="BR">Brazil</option><option value="BQ">British Antarctic Territory</option><option value="IO">British Indian Ocean Territory</option><option value="VG">British Virgin Islands</option><option value="BN">Brunei</option><option value="BG">Bulgaria</option><option value="BF">Burkina Faso</option><option value="BI">Burundi</option><option value="KH">Cambodia</option><option value="CM">Cameroon</option><option value="CA">Canada</option><option value="IC">Canary Islands</option><option value="CT">Canton and Enderbury Islands</option><option value="CV">Cape Verde</option><option value="KY">Cayman Islands</option><option value="CF">Central African Republic</option><option value="EA">Ceuta and Melilla</option><option value="TD">Chad</option><option value="CL">Chile</option><option value="CN">China</option><option value="CX">Christmas Island</option><option value="CP">Clipperton Island</option><option value="CC">Cocos [Keeling] Islands</option><option value="CO">Colombia</option><option value="KM">Comoros</option><option value="CD">Congo [DRC]</option><option value="CG">Congo [Republic]</option><option value="CK">Cook Islands</option><option value="CR">Costa Rica</option><option value="HR">Croatia</option><option value="CU">Cuba</option><option value="CY">Cyprus</option><option value="CZ">Czech Republic</option><option value="DK">Denmark</option><option value="DG">Diego Garcia</option><option value="DJ">Djibouti</option><option value="DM">Dominica</option><option value="DO">Dominican Republic</option><option value="NQ">Dronning Maud Land</option><option value="DD">East Germany</option><option value="TL">East Timor</option><option value="EC">Ecuador</option><option value="EG">Egypt</option><option value="SV">El Salvador</option><option value="GQ">Equatorial Guinea</option><option value="ER">Eritrea</option><option value="EE">Estonia</option><option value="ET">Ethiopia</option><option value="EU">European Union</option><option value="FK">Falkland Islands [Islas Malvinas]</option><option value="FO">Faroe Islands</option><option value="FJ">Fiji</option><option value="FI">Finland</option><option value="FR">France</option><option value="GF">French Guiana</option><option value="PF">French Polynesia</option><option value="TF">French Southern Territories</option><option value="FQ">French Southern and Antarctic Territories</option><option value="GA">Gabon</option><option value="GM">Gambia</option><option value="GE">Georgia</option><option value="DE">Germany</option><option value="GH">Ghana</option><option value="GI">Gibraltar</option><option value="GR">Greece</option><option value="GL">Greenland</option><option value="GD">Grenada</option><option value="GP">Guadeloupe</option><option value="GU">Guam</option><option value="GT">Guatemala</option><option value="GG">Guernsey</option><option value="GN">Guinea</option><option value="GW">Guinea-Bissau</option><option value="GY">Guyana</option><option value="HT">Haiti</option><option value="HM">Heard Island and McDonald Islands</option><option value="HN">Honduras</option><option value="HK">Hong Kong</option><option value="HU">Hungary</option><option value="IS">Iceland</option><option value="IN">India</option><option value="ID">Indonesia</option><option value="IR">Iran</option><option value="IQ">Iraq</option><option value="IE">Ireland</option><option value="IM">Isle of Man</option><option value="IL">Israel</option><option value="IT">Italy</option><option value="CI">Ivory Coast</option><option value="JM">Jamaica</option><option value="JP">Japan</option><option value="JE">Jersey</option><option value="JT">Johnston Island</option><option value="JO">Jordan</option><option value="KZ">Kazakhstan</option><option value="KE">Kenya</option><option value="KI">Kiribati</option><option value="KW">Kuwait</option><option value="KG">Kyrgyzstan</option><option value="LA">Laos</option><option value="LV">Latvia</option><option value="LB">Lebanon</option><option value="LS">Lesotho</option><option value="LR">Liberia</option><option value="LY">Libya</option><option value="LI">Liechtenstein</option><option value="LT">Lithuania</option><option value="LU">Luxembourg</option><option value="MO">Macau</option><option value="MK">Macedonia [FYROM]</option><option value="MG">Madagascar</option><option value="MW">Malawi</option><option value="MY">Malaysia</option><option value="MV">Maldives</option><option value="ML">Mali</option><option value="MT">Malta</option><option value="MH">Marshall Islands</option><option value="MQ">Martinique</option><option value="MR">Mauritania</option><option value="MU">Mauritius</option><option value="YT">Mayotte</option><option value="FX">Metropolitan France</option><option value="MX">Mexico</option><option value="FM">Micronesia</option><option value="MI">Midway Islands</option><option value="MD">Moldova</option><option value="MC">Monaco</option><option value="MN">Mongolia</option><option value="ME">Montenegro</option><option value="MS">Montserrat</option><option value="MA">Morocco</option><option value="MZ">Mozambique</option><option value="MM">Myanmar [Burma]</option><option value="NA">Namibia</option><option value="NR">Nauru</option><option value="NP">Nepal</option><option value="NL">Netherlands</option><option value="AN">Netherlands Antilles</option><option value="NT">Neutral Zone</option><option value="NC">New Caledonia</option><option value="NZ">New Zealand</option><option value="NI">Nicaragua</option><option value="NE">Niger</option><option value="NG">Nigeria</option><option value="NU">Niue</option><option value="NF">Norfolk Island</option><option value="KP">North Korea</option><option value="VD">North Vietnam</option><option value="MP">Northern Mariana Islands</option><option value="NO">Norway</option><option value="OM">Oman</option><option value="QO">Outlying Oceania</option><option value="PC">Pacific Islands Trust Territory</option><option value="PK">Pakistan</option><option value="PW">Palau</option><option value="PS">Palestinian Territories</option><option value="PA">Panama</option><option value="PZ">Panama Canal Zone</option><option value="PG">Papua New Guinea</option><option value="PY">Paraguay</option><option value="YD">People\'s Democratic Republic of Yemen</option><option value="PE">Peru</option><option value="PH">Philippines</option><option value="PN">Pitcairn Islands</option><option value="PL">Poland</option><option value="PT">Portugal</option><option value="PR">Puerto Rico</option><option value="QA">Qatar</option><option value="RO">Romania</option><option value="RU">Russia</option><option value="RW">Rwanda</option><option value="RE">R\u00e9union</option><option value="BL">Saint Barth\u00e9lemy</option><option value="SH">Saint Helena</option><option value="KN">Saint Kitts and Nevis</option><option value="LC">Saint Lucia</option><option value="MF">Saint Martin</option><option value="PM">Saint Pierre and Miquelon</option><option value="VC">Saint Vincent and the Grenadines</option><option value="WS">Samoa</option><option value="SM">San Marino</option><option value="SA">Saudi Arabia</option><option value="SN">Senegal</option><option value="RS">Serbia</option><option value="CS">Serbia and Montenegro</option><option value="SC">Seychelles</option><option value="SL">Sierra Leone</option><option value="SG">Singapore</option><option value="SK">Slovakia</option><option value="SI">Slovenia</option><option value="SB">Solomon Islands</option><option value="SO">Somalia</option><option value="ZA">South Africa</option><option value="GS">South Georgia and the South Sandwich Islands</option><option value="KR">South Korea</option><option value="ES">Spain</option><option value="LK">Sri Lanka</option><option value="SD">Sudan</option><option value="SR">Suriname</option><option value="SJ">Svalbard and Jan Mayen</option><option value="SZ">Swaziland</option><option value="SE">Sweden</option><option value="CH">Switzerland</option><option value="SY">Syria</option><option value="ST">S\u00e3o Tom\u00e9 and Pr\u00edncipe</option><option value="TW">Taiwan</option><option value="TJ">Tajikistan</option><option value="TZ">Tanzania</option><option value="TH">Thailand</option><option value="TG">Togo</option><option value="TK">Tokelau</option><option value="TO">Tonga</option><option value="TT">Trinidad and Tobago</option><option value="TA">Tristan da Cunha</option><option value="TN">Tunisia</option><option value="TR">Turkey</option><option value="TM">Turkmenistan</option><option value="TC">Turks and Caicos Islands</option><option value="TV">Tuvalu</option><option value="UM">U.S. Minor Outlying Islands</option><option value="PU">U.S. Miscellaneous Pacific Islands</option><option value="VI">U.S. Virgin Islands</option><option value="UG">Uganda</option><option value="UA">Ukraine</option><option value="SU">Union(of Soviet Socialist Republics</option><option value="AE">United Arab Emirates</option><option value="GB">United Kingdom</option><option value="US">United States</option><option value="UY">Uruguay</option><option value="UZ">Uzbekistan</option><option value="VU">Vanuatu</option><option value="VA">Vatican City</option><option value="VE">Venezuela</option><option value="VN">Vietnam</option><option value="WK">Wake Island</option><option value="WF">Wallis and Futuna</option><option value="EH">Western Sahara</option><option value="YE">Yemen</option><option value="ZM">Zambia</option><option value="ZW">Zimbabwe</option><option value="AX">\u00c5land Islands</option></select></div></div><div class="field vat_number"><div class="placeholder">VAT Number</div><input type="text"/></div>';h.dom.subscribe_form='<form class="recurly subscribe"><div class="subscription"><div class="plan"><div class="name"></div><div class="field quantity"><div class="placeholder">Qty</div><input type="text"/></div><div class="recurring_cost"><div class="cost"></div><div class="interval"></div></div><div class="free_trial"></div><div class="setup_fee"><div class="title">Setup Fee</div><div class="cost"></div></div></div><div class="add_ons none"></div><div class="coupon"><div class="coupon_code field"><div class="placeholder">Coupon Code</div><input type="text" class="coupon_code"/></div><div class="check"></div><div class="description"></div><div class="discount"></div></div><div class="vat"><div class="title">VAT</div><div class="cost"></div></div></div><div class="due_now"><div class="title">Order Total</div><div class="cost"></div></div><div class="server_errors none"></div><div class="contact_info"></div><div class="billing_info"></div><div class="accept_tos"></div><div class="footer"><button type="submit" class="submit">Subscribe</button></div></form>';h.dom.update_billing_info_form='<form class="recurly update_billing_info"><div class="server_errors none"></div><div class="billing_info"></div><div class="footer"><button type="submit" class="submit">Update</button></div></form>';h.dom.one_time_transaction_form='<form class="recurly update_billing_info"><div class="server_errors none"></div><div class="contact_info"></div><div class="billing_info"></div><div class="accept_tos"></div><div class="footer"><button type="submit" class="submit">Pay</button></div></form>';h.dom.terms_of_service='<input id="tos_check" type="checkbox"/><label id="accept_tos" for="tos_check">I accept the <a target="_blank" class="tos_link">Terms of Service</a><span class="and"> and </span><a target="_blank" class="pp_link">Privacy Policy</a></label>';window.Recurly=h})(jQuery);